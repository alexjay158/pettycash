(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{HPjB:function(l,n,u){"use strict";u.r(n);var e=u("CcnG"),t=function(){return function(){}}(),r=u("XatG"),o=u("kExW"),s=u("pMnS"),i=u("Ip0R"),a=u("2Zpj"),c=u("hOvE"),p=u("O+Oc"),b=u("fMak"),d=u("67Y/"),f=u("sLa7"),h=u("G5J1"),m=function(){function l(l,n,u,e,t,r,o){var s=this;this.router=l,this.ngxService=n,this.service=u,this.toastr=e,this.compressor=t,this.loadingBar=r,this.titleService=o,this.allowedFileExtensions=["image/png","image/jpeg","image/jpg"],this.filesSelected=[],this.recursiveCompress=function(l,n,u){return s.compressor.compress(l).pipe(Object(d.a)(function(e){return console.log("compressed "+n+l.name),s.filesSelected.push(e),{data:e,index:n+1,array:u}}))},this.auth=this.service.getAuth()}return l.prototype.getHeight=function(){if(this.formScreen)return this.formScreen.nativeElement.offsetHeight+"px"},l.prototype.uploadIdCard=function(){var l=this;if(2===this.filesSelected.length){this.ngxService.start();var n=new FormData;n.append("id_card",this.filesSelected[0]),n.append("id_card2",this.filesSelected[1]),this.service.uploadIdCard(n).subscribe(function(n){var u=n;"success"===u.status?(l.filesSelected=[],l.auth.user=u.user,l.service.setAuth(l.auth),l.requestLoan()):l.toastr.success(u.message,""),l.ngxService.stop()},function(n){l.toastr.error("Error connecting to server, please check your internet connection and try again"),l.ngxService.stop()})}else this.toastr.error("Please upload the front and back of your ID card!")},l.prototype.requestLoan=function(){var l=this;this.ngxService.start(),this.service.requestLoan({new_user:!0}).subscribe(function(n){var u=n;l.ngxService.stop(),"success"===u.status?(l.requestSuccessful.show(),setTimeout(function(){l.goToDashboard()},6e3)):l.toastr.success(u.message,"")},function(n){l.toastr.error("Error connecting to server, please check your internet connection and try again"),l.ngxService.stop()})},l.prototype.goToDashboard=function(){this.router.navigate(["/auth"])},l.prototype.selectFile=function(){this.idCardInput.nativeElement.click()},l.prototype.onDrop=function(l){var n=this,u=l.files;if(u.length+this.filesSelected.length<=2)for(var e=0;e<u.length;e++){var t=u[e];t.fileEntry.isFile&&t.fileEntry.file(function(l){-1!==n.allowedFileExtensions.indexOf(l.type)&&n.filesSelected.push(l)})}else this.toastr.error("You cannot upload more than 2 images!")},l.prototype.onChangeFile=function(l){var n=this,u=l.target.files;u.length+this.filesSelected.length<=2?this.recursiveCompress(u[0],0,u).pipe(Object(f.a)(function(l){return l.index>l.array.length-1?h.a:n.recursiveCompress(u[l.index],l.index,u)})).subscribe(function(l){}):this.toastr.error("You cannot upload more than 2 images!")},l.prototype.fileOver=function(l){},l.prototype.fileLeave=function(l){},l.prototype.ngOnInit=function(){},l}(),g=u("ZYCi"),v=u("iJXZ"),y=u("SZbH"),q=u("/CeA"),x=u("ZYjt"),k=e.ob({encapsulation:0,styles:[[""]],data:{}});function C(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,2,"p",[["class","text-primary"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),e.Ib(2,null,["",""]))],null,function(l,n){l(n,2,0,n.context.$implicit.name)})}function S(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,C)),e.pb(2,278528,null,0,i.l,[e.P,e.M,e.t],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(3,0,null,null,2,"p",[["class","text-gray text-xs"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Click upload to continue"]))],function(l,n){l(n,2,0,n.component.filesSelected)},null)}function w(l){return e.Kb(0,[e.Gb(402653184,1,{formScreen:0}),e.Gb(402653184,2,{idCardInput:0}),e.Gb(402653184,3,{requestSuccessful:0}),(l()(),e.qb(3,0,null,null,46,"span",[["class","apply-loan-page"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,45,"div",[["class","wrapper"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,44,"section",[],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,43,"div",[["class","inner"]],null,null,null,null,null)),(l()(),e.qb(7,0,null,null,42,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,0,"div",[["class","image-holder col-md-5 d-none d-md-block"],["style","background: #afafaf url('assets/imgs/apply-wizard.jpg') no-repeat; background-size: 100% 100%;"]],[[4,"height",null]],null,null,null,null)),(l()(),e.qb(9,0,[[1,0],["formScreen",1]],null,40,"div",[["class","col-md-7"]],null,null,null,null,null)),(l()(),e.qb(10,0,null,null,37,"div",[["class","form-content text-sm"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,2,"div",[["class","form-header"]],null,null,null,null,null)),(l()(),e.qb(12,0,null,null,1,"h3",[["class","text-primary"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Application Form"])),(l()(),e.qb(14,0,null,null,21,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(15,0,null,null,20,"div",[["class","offset-md-3 col-md-6 col-sm-12"]],null,null,null,null,null)),(l()(),e.qb(16,0,null,null,19,"ul",[["class","wizard"]],null,null,null,null,null)),(l()(),e.qb(17,0,null,null,4,"li",[],null,null,null,null,null)),(l()(),e.qb(18,0,null,null,1,"span",[["class","marker-number"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,["\xa0"])),(l()(),e.qb(20,0,null,null,0,"span",[["class","marker-line"]],null,null,null,null,null)),(l()(),e.qb(21,0,null,null,0,"span",[["class","marker-text"]],null,null,null,null,null)),(l()(),e.qb(22,0,null,null,4,"li",[],null,null,null,null,null)),(l()(),e.qb(23,0,null,null,1,"span",[["class","marker-number"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,["\xa0"])),(l()(),e.qb(25,0,null,null,0,"span",[["class","marker-line"]],null,null,null,null,null)),(l()(),e.qb(26,0,null,null,0,"span",[["class","marker-text"]],null,null,null,null,null)),(l()(),e.qb(27,0,null,null,4,"li",[],null,null,null,null,null)),(l()(),e.qb(28,0,null,null,1,"span",[["class","marker-number"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,["\xa0"])),(l()(),e.qb(30,0,null,null,0,"span",[["class","marker-line"]],null,null,null,null,null)),(l()(),e.qb(31,0,null,null,0,"span",[["class","marker-text"]],null,null,null,null,null)),(l()(),e.qb(32,0,null,null,3,"li",[["class","active"]],null,null,null,null,null)),(l()(),e.qb(33,0,null,null,1,"span",[["class","marker-number"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,["\xa0"])),(l()(),e.qb(35,0,null,null,0,"span",[["class","marker-text"]],null,null,null,null,null)),(l()(),e.qb(36,0,null,null,1,"p",[["class","text-gray heading text-sm"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Upload the front and back of your ID card."])),(l()(),e.qb(38,0,null,null,1,"file-drop",[["accept","image/*"],["contentClassName","drop-zone-content"],["dropZoneClassName","drop-zone"],["dropZoneLabel","Click here to select file or drop file here (.jpeg, .png)"],["multiple","true"]],null,[[null,"onFileDrop"],[null,"onFileOver"],[null,"onFileLeave"],[null,"click"]],function(l,n,u){var e=!0,t=l.component;return"onFileDrop"===n&&(e=!1!==t.onDrop(u)&&e),"onFileOver"===n&&(e=!1!==t.fileOver(u)&&e),"onFileLeave"===n&&(e=!1!==t.fileLeave(u)&&e),"click"===n&&(e=!1!==t.selectFile()&&e),e},r.c,r.b)),e.pb(39,180224,null,0,a.a,[e.A,e.E],{accept:[0,"accept"],dropZoneLabel:[1,"dropZoneLabel"],dropZoneClassName:[2,"dropZoneClassName"],contentClassName:[3,"contentClassName"],showBrowseBtn:[4,"showBrowseBtn"]},{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"}),(l()(),e.qb(40,0,[[2,0],["idCardInput",1]],null,0,"input",[["accept","image/*"],["multiple",""],["name","file"],["style","visibility: hidden; height: 0;"],["type","file"]],null,[[null,"change"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==l.component.onChangeFile(u)&&e),e},null,null)),(l()(),e.qb(41,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,S)),e.pb(43,16384,null,0,i.m,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(44,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.qb(45,0,null,null,2,"div",[["align","center"]],null,null,null,null,null)),(l()(),e.qb(46,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.uploadIdCard()&&e),e},null,null)),(l()(),e.Ib(-1,null,["Upload"])),(l()(),e.qb(48,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.qb(49,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.qb(50,0,null,null,1,"swal",[["text","Your request has been received. You will get a response from us shortly!"],["type","success"]],null,[[null,"confirm"]],function(l,n,u){var e=!0;return"confirm"===n&&(e=!1!==l.component.goToDashboard()&&e),e},o.c,o.a)),e.pb(51,704512,[[3,4],["requestSuccessful",4]],0,c.a,[c.e],{title:[0,"title"],text:[1,"text"],type:[2,"type"],showCancelButton:[3,"showCancelButton"],focusCancel:[4,"focusCancel"]},{confirm:"confirm"})],function(l,n){var u=n.component;l(n,39,0,"image/*","Click here to select file or drop file here (.jpeg, .png)","drop-zone","drop-zone-content",!1),l(n,43,0,u.filesSelected.length>0),l(n,51,0,e.sb(1,"Congratulations ",u.auth.user.firstname,""),"Your request has been received. You will get a response from us shortly!","success",!1,!0)},function(l,n){l(n,8,0,n.component.getHeight())})}function F(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,1,"app-id-card-page",[],null,null,null,w,k)),e.pb(1,114688,null,0,m,[g.o,v.d,p.a,y.j,b.a,q.c,x.i],null,null)],function(l,n){l(n,1,0)},null)}var I=e.mb("app-id-card-page",m,F,{},{},[]),O=u("gIcY"),j=function(){return function(){}}();u.d(n,"IdCardPageModuleNgFactory",function(){return L});var L=e.nb(t,[],function(l){return e.xb([e.yb(512,e.j,e.cb,[[8,[r.a,o.b,o.d,s.a,I]],[3,e.j],e.y]),e.yb(4608,i.o,i.n,[e.v,[2,i.C]]),e.yb(4608,O.w,O.w,[]),e.yb(4608,O.d,O.d,[]),e.yb(4608,c.c,c.c,[]),e.yb(1073742336,i.c,i.c,[]),e.yb(1073742336,a.b,a.b,[]),e.yb(1073742336,O.u,O.u,[]),e.yb(1073742336,O.h,O.h,[]),e.yb(1073742336,O.r,O.r,[]),e.yb(1073742336,c.d,c.d,[]),e.yb(1073742336,g.r,g.r,[[2,g.x],[2,g.o]]),e.yb(1073742336,j,j,[]),e.yb(1073742336,t,t,[]),e.yb(1024,g.m,function(){return[[{path:"",component:m,pathMatch:"full"}]]},[])])})}}]);